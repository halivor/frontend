# tcp connection

```
Header  // peer与agent通讯格式，与外部无关

以下为客户端上行消息格式

Auth // auth 消息格式，验证通过后，发送/接收普通消息
> 例: 10S0100000006000000012345678003212345678901234567890123456789012
> ver   2   10
> typ   1   S
> opt   1   0
> uid   8   连接唯一ID, uid:10000000 => "10000000"
> cid   8   连接分类ID, rid:60000000 => "60000000"
> sign  8   签名串 12345678
> len   4   32 Auth包后字符串长度
> body      12345678901234567890123456789012

// 普通消息 格式
SHeader // 与客户端交互格式，字符串头
> 例: 10S11000123456780004RESERVEDPING // ping 消息
> ver  2  "10"
> typ  1  'B' 二进制头
>         'S' 字符串头, 暂时全部使用S
> opt  1  '0' 普通消息
>         '1' 消息需要ack
>         'A' ack消息
> cmd  4      命令号 1000, typ = 'S', cmd = '1000' 
>                          typ = 'B', cmd =  1000 , 使用大端表示
> seq  8      待确认消息sequence, 12345678
> len  4      长度, typ = 'S' => "0004" 代表sheader后有4个字符
>                   typ = 'B' =>     4  代表sheader后有4个字符, 使用大端表示
> res  8      预留
```
